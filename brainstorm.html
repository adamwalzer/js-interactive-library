<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">

	<title>PlayJS Playground</title>
	<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="library.0.1.0.js"></script>
	<script type="text/javascript" src="config.game.js"></script>
	<script type="text/mock-js">

	pl.game.component('DropIn', function () {
		
		this.entity('.trash', function () {
			
			// initialization arguments come from node attributes
			this.init = function (_types) {
				var types;

				types = _types.split(pl.REGEX_COMMA);

				this.sup();

				this.type = pl.random(types);

				this.canit.enable()

				return this;
			};

		});

	});

	pl.game.component.config('DropIn', {
		assets: {
			'img': ''
		}
	});

	pl.game.template('TrashCan', function () {

		this.entity('.screen', function () {

			this.title = null;

			this.init = function  () {
				this.title = 'Recycle!';
			};

		});

		this.entity('#picker', function () {
			
			this.pick = function () {
				// body...
			};

		});

		this.entity('img.trash', function () {

			this.events = {
				'animate': 'onAnimation'
			};
			
			this.begin = function () {
				this.drop();
			};

			this.drop = function () {
				this.addClass('DROP');
			};

			this.onAnimation = function (_event) {
				this.cans.interact(this);
			};
		});

		this.entity('#cans', function () {
			
			this.targetCan = null;

			this.response = function (_entity) {
				if (_entity.is('.trash')) {
					this.targetCan.interact(_entity);
				}
			};

		});

		this.entity('#cans li', function () {
			
			this.type = '';

			this.response = function (_entity) {
				if (_entity.type === this.type) {
					this.screen.score.up();
				}
			};

		});

	});

	</script>

	<script type="text/javascript">

	pl.game.component('DropIn', function () {
			
		this.pick = function (_target) {
			console.log('screen pick', _target);
		};

		this.entity('#trash-display', function () {
			
			this.pick = function (_target) {
				this.sup(_target);
				console.log('entity pick', this);
			};

		});

		this.entity('#dropzone', function () {
			this.doSomething = function () {
				// body...
			};
		});
	});

	pl.game.component('wow', function () {
		console.log('component!');

		this.special = true;

		this.entity('strong', function () {
			this.setup = function () {
				this.css('color', 'blue');
			};

		});
	});


	
	pl.game('Recycle', function () {

		this.whatever = function () {
			console.log('game whatever');
		};

		this.screen(0, function () {

			this.next = function () {
				this.sup();
				this.game.whatever();
			};

		});

		// this.screen('trash-drop', function () {
			
		// 	this.pick = function (_target) {
		// 		console.log('screen pick', _target);
		// 	};

		// 	this.entity('#trash-display', function () {
				
		// 		this.pick = function (_target) {
		// 			this.sup(_target);
		// 			console.log('entity pick', this);
		// 			this.dropzone.doSomething();
		// 		};

		// 	});

		// 	this.entity('#dropzone', function () {
		// 		this.doSomething = function () {
		// 			console.log(this.trash_display.pick);
		// 		};
		// 	});

		// });

	});

	</script>
</head>
<body>
	<div id="Recycle">
		<section class="screen">
			<h1>{{title}}</h1>
			<p>Get ready to learn how to recycle!</p>
			<div pl-action="next()">
				<button>Next</button>
			</div>
		</section>

		<section id="trash-drop" class="screen" pl-component="DropIn">
			<div id="trash-display" pl-action="pick(event.target)">
				<img src="bin.png" class="bg">
				<img src="letter.png" class="trash" pl-type="trash">
				<img src="apple.png" class="trash" pl-type="compost">
				<img src="glass.png" class="trash" pl-type="recycling">
			</div>
			<ul id="dropzone"></ul>
			<div pl-component="wow">
				<strong>Wow!</strong>
			</div>
		</section>
	</div>
</body>
</html>