<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">

	<title>PlayJS Playground</title>
	<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="library.0.1.0.js"></script>
	<script type="text/javascript" src="config.game.js"></script>
	<script type="text/mock-js">

	pl.game.component('DropIn', function () {

		this.assest = {
			'img': "image.png"
		};
		
		this.entity('.trash', function () {
			
			// initialization arguments come from node attributes
			this.init = function (_types) {
				var types;

				types = _types.split(pl.REGEX_COMMA);

				this.sup();

				this.type = pl.random(types);

				this.canit.enable()

				return this;
			};

		});

	});

	pl.game.component.config('DropIn', {
		assets: {
			'img': ''
		}
	});

	pl.game.template('TrashCan', function () {

		pl.Entity.extend(function Screen () {

			this.isComplete = false;

			this.validation = {
				complete: function () {
					return this.score.isMax && this.timer.isComplete;
				};
			};

			this.init = function () {
				this.attachEvents();
			};

			this.attachEvents = function () {
				var screen;
				
				screen = this;

				this.score.on('max', function () {
					screen.complete();
				});
			};

			// Advance to next screen
			this.next = function () {
				this.manager.next();
			};

			this.complete = function () {
				if (this.isValid('complete')) {
					this.isComplete = true;

					this.trigger('complete');
					this.addClass('COMPLETE');
				}

				return this.isComplete;
			};

		});

		this.entity('.screen', function () {

			this.title = null;

			this.init = function  () {
				this.title = 'Recycle!';
			};

		});

		this.entity('#picker', function () {
			
			this.pick = function () {
				// body...
			};

		});

		this.entity('img.trash', function () {

			this.events = {
				'animate': 'onAnimation'
			};
			
			this.begin = function () {
				this.drop();
			};

			this.drop = function () {
				this.addClass('DROP');
			};

			this.onAnimation = function (_event) {
				this.cans.interact(this);
			};
		});

		this.entity('#cans', function () {
			
			this.targetCan = null;

			this.response = function (_entity) {
				if (_entity.is('.trash')) {
					this.targetCan.interact(_entity);
				}
			};

		});

		this.entity('#cans li', function () {
			
			this.type = '';

			this.response = function (_entity) {
				if (_entity.type === this.type) {
					this.screen.score.up();
				}
			};

		});

	});

	pl.game('Recycle : TrashCan', function () {
		
		

	});

	</script>

	<script type="text/javascript">

	pl.game.on('initialized', function () {
		console.log('initialized!');
	});
	
	pl.game('Recycle', function () {

		this.whatever = function () {
			// body...
		};

		this.screen(0, function () {

			this.next = function () {
				this.sup();

				this.game.whatever()
			};

		});

		this.screen('trash-drop', function () {
			
			this.nice = '!';

		});

	});

	</script>
</head>
<body>
	<div id="Recycle">
		<section class="screen">
			<h1>{{title}}</h1>
			<p>Get ready to learn how to recycle!</p>
			<div>
				<button pl-action="next()">Next</button>
			</div>
		</section>

		<section id="trash-drop" class="screen" pl-component="DropIn">
			<div id="trash-display">
				<img src="bin.png" class="bg">
				<img src="letter.png" class="trash" pl-type="trash">
				<img src="apple.png" class="trash" pl-type="compost">
				<img src="glass.png" class="trash" pl-type="recycling">
			</div>
			<ul id="dropzone"></ul>
		</section>
	</div>
</body>
</html>