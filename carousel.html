<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Carousel | PlayJS</title>

	<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="build/play.js"></script>
	<script type="text/javascript" src="config.game.js"></script>

	<script type="text/javascript">
	pl.game('carousel', function () {
		
		this.screen('welcome', function () {
			
			this.timeout = null;
			
			this.ready = function () {
				this.delay(1000, this.open);

				return this;
			};

			this.next = function () {
				return this
					.leave()
					.proto()
					.open();
			};

		});

		this.screen('be-bright', function () {

			this.audio = {};

			this.open = function () {
				console.log('screen open');
				this.audio.opener.play();
				return this.proto();
			};

			this.next = function () {
				return this.leave().proto().open();
			};

			this.entity('#bulbs', function () {
				this.ready = function () {
					console.log('override #bulbs', this);
					return this;
				};
			});

			this.entity('audio.opener', function () {
				
				this.init = function () {
					this.audio.opener = this;
				};

				this.play = function () {
					this.$els[0].play();
					return this;
				};

			});

		});

	});

	</script>

	<link rel="stylesheet" type="text/css" href="style/reset.css">
	<link rel="stylesheet" type="text/css" href="style/layout.css">

	<style type="text/css">
	body {
		font-family: HelveticaNeue-Light;
		perspective: 500px;
	}

	h1, h2, h3, b, strong {
		font-family: HelveticaNeue-Medium;
		font-weight: normal;
	}

	#screens {
		width: 70%; height: 600px;
	}

		.screen {
			position: absolute;
			border: solid 1px #ddd;
			top: 0; left: 0;
			width: 100%; height: 100%;
			overflow: hidden;

			background: url(images/loading.gif) no-repeat center center;
			background-size: 100px;
			opacity: 0;
			border-radius: 4px;
			transform: translateZ(-300px);
			transition: transform 1s, opacity 1s;
			z-index: -1;
		}

		.screen.READY {
			background: none;
		}

		.screen.OPEN {
			opacity: 1;
			z-index: auto;
			transform: translateZ(0);
		}

		.screen.LEAVE {
			opacity: 0;
			transform: translateZ(300px);
		}

			.screen > * {
				opacity: 0;
				transition: opacity 1s;
			}

			.screen.READY > * {
				opacity: 1;
			}

		.screen button {
			position: absolute;
			bottom: 0; right: 0;
			border: none;
			border-bottom: solid 1px;
			margin: 8px;
			padding: 0;
			padding-bottom: 4px;

			color: #05a;
			background: none;
			outline: none;
			text-transform: uppercase;
			cursor: pointer;
		}

	#be-bright h1 {
		text-align: center;
	}
	</style>

</head>
<body id="carousel">
	<div class="center">
		<div id="screens">
			<section id="welcome" class="screen">
				<div class="center">
					<h1>Welcome to the carousel!</h1>
				</div>
				<button pl-action="next()">continue</button>
			</section>
			<section id="be-bright" class="screen">
				<audio class="opener" src="media/audio/header.mp3" preload></audio>
				<h1>WHY DOES MR. ECO WANT YOU<br>TO TURN OFF THE LIGHTS?</h1>
				<div id="bulbs" pl-component="select"></div>
				<button pl-action="next()">continue</button>
			</section>
			<section id="images" class="screen" pl-component="carousel"></section>
		</div>
	</div>
	
</body>
</html>